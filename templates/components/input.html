<div class="input-group">

        <label for="{{ field.name }}" class="ibm-plex-mono-regular form-label">{{ field.label }}</label>
        <div class="input-container {% if field.status == 'occupied' %}occupied{% elif field.status == 'available' %}available{% endif %}">
          {% if field.name == 'password' %}
          <div class="char-counter">
            <span id="charCount">0</span>/8 
            {% if type == 'signup' %} |
            <span id="strengthText" class="password-strength-text">Weak</span>
            {% endif %}
          </div>
          {% elif field.name == 'pincode' %}
          <div class="char-counter">
            <span id="pincodeCount">0</span>/6
          </div>
          {% endif %} 
          <input type="{{ field.type }}" id="{{ field.name }}" name="{{ field.name }}"
            class="ibm-plex-mono-regular input-field"
            {% if field.value == 'Occupied' %}
            style="border: solid 2px red  !important; color: red !important; "
            {% elif field.value == 'Available' %}
            style="border: solid 2px green !important; color: green !important;" 

            {% endif %}
            autocomplete="off" 
            {% if first %}
            autofocus 
            {% endif %} 
            {% if field.name=='password' %} 
            title="Password must be exactly 8 characters" maxlength="8" 
            {% endif %} 
            {% if field.name=='pincode' %}
            
            title="Pincode must be exactly 6 digits" maxlength="6" inputmode="numeric"
            {% endif %}
            data-autofill-monitor="true" 
            {% if field.name=='pincode' %} 
            onkeypress="return isNumberKey(event)" 
            {% endif %} 
            {% if field.name=='price_per_hour' %} 
            onkeypress="return isNumberKey(event)" 
            {% endif %} 
            placeholder="{{ field.placeholder }}" 
            {% if field.value %} 
            value="{{ field.value }}" 
            {% endif %} 
            {% if field.disabled %}
            disabled
            {% endif %} 
    
          />
          {% set icon_path = icon_map.get(field.icon) %}
          {% if icon_path %}
          {% if field.value == 'Occupied' %}
          <img class="input-icon" src="/static/svg/status_red.svg" alt="Status icon" />
            

          {% elif field.value == 'Available' %}
          <img class="input-icon" src="/static/svg/status_green.svg" alt="Status icon" />
          {% else %}

          <img class="input-icon" src="{{ url_for('static', filename=icon_path) }}" alt="{{ field.icon }} icon" />

          {% endif %}
          {% endif %}
          {% if field.name == 'password' %}
          <button type="button" id="togglePassword" class="password-toggle" aria-label="Show password">
            <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M12 5C7 5 2.73 8.11 1 12.5C2.73 16.89 7 20 12 20C17 20 21.27 16.89 23 12.5C21.27 8.11 17 5 12 5ZM12 17.5C9.24 17.5 7 15.26 7 12.5C7 9.74 9.24 7.5 12 7.5C14.76 7.5 17 9.74 17 12.5C17 15.26 14.76 17.5 12 17.5ZM12 9.5C10.34 9.5 9 10.84 9 12.5C9 14.16 10.34 15.5 12 15.5C13.66 15.5 15 14.16 15 12.5C15 10.84 13.66 9.5 12 9.5Z"
                fill="#1D1B20" />
            </svg>
          </button>
          {% if type == 'signup' %}
          <div class="password-strength-container">
            <div class="password-strength-indicator" id="passwordStrengthIndicator"></div>
          </div>
          {% endif %} {% endif %}
        </div>

      </div>

<style>
  
  .input-field.occupied-field {
    border-color: #EF4444; 
    background-color: rgba(239, 68, 68, 0.05); 
  }

  .input-field.occupied-field:focus {
    border-color: #DC2626; 
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.15);
  }

  .input-field.available-field {
    border-color: #10B981;
    background-color: rgba(16, 185, 129, 0.05); 
  }

  .input-field.available-field:focus {
    border-color: #059669; 
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.15);
  }
  
  .input-container.occupied {
    position: relative;
  }
  
  .input-container.occupied::after {
    content: 'Occupied';
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 12px;
    background-color: #FEE2E2;
    color: #B91C1C;
    padding: 2px 8px;
    border-radius: 4px;
    pointer-events: none;
  }
  
  .input-container.available::after {
    content: 'Available';
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 12px;
    background-color: #DCFCE7;
    color: #166534;
    padding: 2px 8px;
    border-radius: 4px;
    pointer-events: none;
  }
</style>